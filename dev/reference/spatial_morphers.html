<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Morph spatial networks into a different structure — spatial_morphers • sfnetworks</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Morph spatial networks into a different structure — spatial_morphers"><meta name="description" content="Spatial morphers form spatial add-ons to the set of
morphers provided by tidygraph. These
functions change the existing structure of the network."><meta property="og:description" content="Spatial morphers form spatial add-ons to the set of
morphers provided by tidygraph. These
functions change the existing structure of the network."><meta property="og:image" content="https://luukvdmeer.github.io/sfnetworks/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sfnetworks</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.9.9.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/sfn01_intro.html">Introduction to sfnetworks</a></li>
    <li><a class="dropdown-item" href="../articles/sfn02_create_represent.html">Creating and representing spatial networks</a></li>
    <li><a class="dropdown-item" href="../articles/sfn03_cleaning.html">Cleaning spatial networks</a></li>
    <li><a class="dropdown-item" href="../articles/sfn04_join_filter.html">Spatial joins and filters</a></li>
    <li><a class="dropdown-item" href="../articles/sfn05_routing.html">Routing on spatial networks</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/luukvdmeer/sfnetworks/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Morph spatial networks into a different structure</h1>
      <small class="dont-index">Source: <a href="https://github.com/luukvdmeer/sfnetworks/blob/main/R/morphers.R" class="external-link"><code>R/morphers.R</code></a></small>
      <div class="d-none name"><code>spatial_morphers.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Spatial morphers form spatial add-ons to the set of
<code><a href="https://tidygraph.data-imaginist.com/reference/morphers.html" class="external-link">morphers</a></code> provided by <code>tidygraph</code>. These
functions change the existing structure of the network.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">to_spatial_contracted</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  simplify <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  compute_centroids <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  attribute_summary <span class="op">=</span> <span class="st">"ignore"</span>,</span>
<span>  summarise_attributes <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  store_original_data <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">to_spatial_directed</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">to_spatial_explicit</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">to_spatial_implicit</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">to_spatial_mixed</span><span class="op">(</span><span class="va">x</span>, <span class="va">directed</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">to_spatial_neighborhood</span><span class="op">(</span><span class="va">x</span>, <span class="va">node</span>, <span class="va">threshold</span>, weights <span class="op">=</span> <span class="fu"><a href="spatial_edge_measures.html">edge_length</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">to_spatial_reversed</span><span class="op">(</span><span class="va">x</span>, protect <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">to_spatial_shortest_paths</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">to_spatial_simple</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  remove_multiple <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_loops <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  attribute_summary <span class="op">=</span> <span class="st">"first"</span>,</span>
<span>  summarise_attributes <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  store_original_data <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">to_spatial_smooth</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  protect <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  require_equal <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  attribute_summary <span class="op">=</span> <span class="st">"ignore"</span>,</span>
<span>  summarise_attributes <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  store_original_data <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">to_spatial_subdivision</span><span class="op">(</span><span class="va">x</span>, protect <span class="op">=</span> <span class="cn">NULL</span>, all <span class="op">=</span> <span class="cn">FALSE</span>, merge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">to_spatial_subset</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span>, subset_by <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">to_spatial_transformed</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">to_spatial_unique</span><span class="op">(</span><span class="va">x</span>, attribute_summary <span class="op">=</span> <span class="st">"ignore"</span>, store_original_data <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An object of class <code><a href="sfnetwork.html">sfnetwork</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments to be passed on to other functions. See the description
of each morpher for details.</p></dd>


<dt id="arg-simplify">simplify<a class="anchor" aria-label="anchor" href="#arg-simplify"></a></dt>
<dd><p>Should the network be simplified after contraction? Defaults
to <code>TRUE</code>. This means that multiple edges and loop edges will be
removed. Multiple edges are introduced by contraction when there are several
connections between the same groups of nodes. Loop edges are introduced by
contraction when there are connections within a group. Note however that
setting this to <code>TRUE</code> also removes multiple edges and loop edges that
already existed before contraction.</p></dd>


<dt id="arg-compute-centroids">compute_centroids<a class="anchor" aria-label="anchor" href="#arg-compute-centroids"></a></dt>
<dd><p>Should the new geometry of each contracted group of
nodes be the centroid of all group members? Defaults to <code>TRUE</code>. If set
to <code>FALSE</code>, the geometry of the first node in each group will be used
instead, which requires considerably less computing time.</p></dd>


<dt id="arg-attribute-summary">attribute_summary<a class="anchor" aria-label="anchor" href="#arg-attribute-summary"></a></dt>
<dd><p>Whenever groups of nodes or edges are merged
into a single feature during morphing, how should their attributes be
summarized? There are several options, see
<code><a href="https://r.igraph.org/reference/igraph-attribute-combination.html" class="external-link">igraph-attribute-combination</a></code> for details.</p></dd>


<dt id="arg-summarise-attributes">summarise_attributes<a class="anchor" aria-label="anchor" href="#arg-summarise-attributes"></a></dt>
<dd><p>Deprecated, use <code>attribute_summary</code> instead.</p></dd>


<dt id="arg-store-original-data">store_original_data<a class="anchor" aria-label="anchor" href="#arg-store-original-data"></a></dt>
<dd><p>Whenever groups of nodes or edges are merged
into a single feature during morphing, should the data of the original
features be stored as an attribute of the new feature, in a column named
<code>.orig_data</code>. This is in line with the design principles of
<code>tidygraph</code>. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-directed">directed<a class="anchor" aria-label="anchor" href="#arg-directed"></a></dt>
<dd><p>Which edges should be directed? Evaluated by
<code><a href="evaluate_edge_query.html">evaluate_edge_query</a></code>.</p></dd>


<dt id="arg-node">node<a class="anchor" aria-label="anchor" href="#arg-node"></a></dt>
<dd><p>The node for which the neighborhood will be calculated.
Evaluated by <code><a href="evaluate_node_query.html">evaluate_node_query</a></code>. When multiple nodes are
given, only the first one is used.</p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>The threshold cost to be used. Only nodes reachable within
this threshold cost from the reference node will be included in the
neighborhood. Should be a numeric value in the same units as the given edge
weights. Alternatively, units can be specified explicitly by providing a
<code><a href="https://r-quantities.github.io/units/reference/units.html" class="external-link">units</a></code> object. Multiple threshold values may be given,
which will result in mutliple neigborhoods being returned.</p></dd>


<dt id="arg-weights">weights<a class="anchor" aria-label="anchor" href="#arg-weights"></a></dt>
<dd><p>The edge weights to be used for travel cost computation.
Evaluated by <code><a href="evaluate_weight_spec.html">evaluate_weight_spec</a></code>. The default is
<code><a href="spatial_edge_measures.html">edge_length</a></code>, which computes the geographic lengths of the
edges.</p></dd>


<dt id="arg-protect">protect<a class="anchor" aria-label="anchor" href="#arg-protect"></a></dt>
<dd><p>Nodes or edges to be protected from being changed in
structure. Evaluated by <code><a href="evaluate_node_query.html">evaluate_node_query</a></code> in the case of
nodes and by <code><a href="evaluate_edge_query.html">evaluate_edge_query</a></code> in the case of edges.
Defaults to <code>NULL</code>, meaning that no features are protected.</p></dd>


<dt id="arg-remove-multiple">remove_multiple<a class="anchor" aria-label="anchor" href="#arg-remove-multiple"></a></dt>
<dd><p>Should multiple edges be merged into one. Defaults
to <code>TRUE</code>.</p></dd>


<dt id="arg-remove-loops">remove_loops<a class="anchor" aria-label="anchor" href="#arg-remove-loops"></a></dt>
<dd><p>Should loop edges be removed. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-require-equal">require_equal<a class="anchor" aria-label="anchor" href="#arg-require-equal"></a></dt>
<dd><p>Which attributes of its incident edges should be equal
in order for a pseudo node to be removed? Evaluated as a
<code><a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">dplyr_tidy_select</a></code> argument. Defaults to <code>NULL</code>,
meaning that attribute equality is not considered for pseudo node removal.</p></dd>


<dt id="arg-all">all<a class="anchor" aria-label="anchor" href="#arg-all"></a></dt>
<dd><p>Should edges be subdivided at all their interior points? If set
to <code>FALSE</code>, edges are only subdivided at those interior points that
share their location with any other interior or boundary point (a node) in
the edges table. Defaults to <code>FALSE</code>. By default sfnetworks rounds
coordinates to 12 decimal places to determine spatial equality. You can
influence this behavior by explicitly setting the precision of the network
using <code><a href="https://r-spatial.github.io/sf/reference/st_precision.html" class="external-link">st_set_precision</a></code>.</p></dd>


<dt id="arg-merge">merge<a class="anchor" aria-label="anchor" href="#arg-merge"></a></dt>
<dd><p>Should multiple subdivision points at the same location be
merged into a single node, and should subdivision points at the same
location as an existing node be merged into that node? Defaults to
<code>TRUE</code>. If set to <code>FALSE</code>, each subdivision point is added
separately as a new node to the network. By default sfnetworks rounds
coordinates to 12 decimal places to determine spatial equality. You can
influence this behavior by explicitly setting the precision of the network
using <code><a href="https://r-spatial.github.io/sf/reference/st_precision.html" class="external-link">st_set_precision</a></code>.</p></dd>


<dt id="arg-subset-by">subset_by<a class="anchor" aria-label="anchor" href="#arg-subset-by"></a></dt>
<dd><p>Whether to create subgraphs based on nodes or edges.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Either a <code>morphed_sfnetwork</code>, which is a list of one or more
<code><a href="sfnetwork.html">sfnetwork</a></code> objects, or a <code>morphed_tbl_graph</code>, which is a
list of one or more <code><a href="https://tidygraph.data-imaginist.com/reference/tbl_graph.html" class="external-link">tbl_graph</a></code> objects. See the
description of each morpher for details.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Morphers are not meant to be called directly. Instead, they should
be called inside the <code><a href="https://tidygraph.data-imaginist.com/reference/morph.html" class="external-link">morph</a></code> verb to change the
network structure temporarily. Depending on the chosen morpher, this results
in a list of one or more network objects. Single elements of that list can
be extracted directly as a new network by calling the morpher inside the
<code><a href="https://tidygraph.data-imaginist.com/reference/morph.html" class="external-link">convert</a></code> verb instead, to make the changes lasting
rather than temporary.</p>
<p>It also possible to create your own morphers. See the documentation of
<code><a href="https://tidygraph.data-imaginist.com/reference/morph.html" class="external-link">morph</a></code> for the requirements for custom morphers.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>to_spatial_contracted()</code>: Combine groups of nodes into a single node per
group. <code>...</code> is forwarded to <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></code> to
create the groups. The centroid of such a group will be used by default as
geometry of the contracted node. If edges are spatially explicit, edge
geometries are updated accordingly such that the valid spatial network
structure is preserved. Returns a <code>morphed_sfnetwork</code> containing a
single element of class <code><a href="sfnetwork.html">sfnetwork</a></code>.</p></li>
<li><p><code>to_spatial_directed()</code>: Make a network directed in the direction given
by the linestring geometries of the edges. Differs from
<code><a href="https://tidygraph.data-imaginist.com/reference/morphers.html" class="external-link">to_directed</a></code>, which makes a network directed based
on the node indices given in the <code>from</code> and <code>to</code> columns. In
undirected networks these indices may not correspond with the endpoints of
the linestring geometries. Returns a <code>morphed_sfnetwork</code> containing a
single element of class <code><a href="sfnetwork.html">sfnetwork</a></code>. This morpher requires edges
to be spatially explicit. If not, use <code><a href="https://tidygraph.data-imaginist.com/reference/morphers.html" class="external-link">to_directed</a></code>.</p></li>
<li><p><code>to_spatial_explicit()</code>: Create linestring geometries between source
and target nodes of edges. If the edges data can be directly converted to
an object of class <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf</a></code> using <code><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></code>,
extra arguments can be provided as <code>...</code> and will be forwarded to
<code><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></code> internally. Otherwise, straight lines will be
drawn between the source and target node of each edge. Returns a
<code>morphed_sfnetwork</code> containing a single element of class
<code><a href="sfnetwork.html">sfnetwork</a></code>.</p></li>
<li><p><code>to_spatial_implicit()</code>: Drop edge geometries from the network. Returns
a <code>morphed_sfnetwork</code> containing a single element of class
<code><a href="sfnetwork.html">sfnetwork</a></code>.</p></li>
<li><p><code>to_spatial_mixed()</code>: Construct a mixed network in which some edges
are directed, and some are undirected. In practice this is implemented as a
directed network in which those edges that are meant to be undirected are
duplicated and reversed. Returns a <code>morphed_sfnetwork</code> containing a
single element of class <code><a href="sfnetwork.html">sfnetwork</a></code>.</p></li>
<li><p><code>to_spatial_neighborhood()</code>: Limit a network to the spatial neighborhood of
a specific node. <code>...</code> is forwarded to <code><a href="st_network_cost.html">st_network_cost</a></code> to
compute the travel cost from the specified node to all other nodes in the
network. Returns a <code>morphed_sfnetwork</code> that may contain multiple
elements of class <code><a href="sfnetwork.html">sfnetwork</a></code>, depending on the number of given
thresholds. When unmorphing only the first instance of both the node and
edge data will be used, as the the same node and/or edge can be present in
multiple neighborhoods.</p></li>
<li><p><code>to_spatial_reversed()</code>: Reverse the direction of edges. Returns a
<code>morphed_sfnetwork</code> containing a single element of class
<code><a href="sfnetwork.html">sfnetwork</a></code>.</p></li>
<li><p><code>to_spatial_shortest_paths()</code>: Limit a network to those nodes and edges that
are part of the shortest path between two nodes. <code>...</code> is evaluated in
the same manner as <code><a href="st_network_paths.html">st_network_paths</a></code>. Returns a
<code>morphed_sfnetwork</code> that may contain multiple elements of class
<code><a href="sfnetwork.html">sfnetwork</a></code>, depending on the number of requested paths. When
unmorphing only the first instance of both the node and edge data will be
used, as the the same node and/or edge can be present in multiple paths.</p></li>
<li><p><code>to_spatial_simple()</code>: Construct a simple version of the network. A
simple network is defined as a network without loop edges and multiple
edges. A loop edge is an edge that starts and ends at the same node.
Multiple edges are different edges between the same node pair. When merging
them into a single edge, the geometry of the first edge is preserved. The
order of the edges can be influenced by calling <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></code>
before simplifying. Returns a <code>morphed_sfnetwork</code> containing a single
element of class <code><a href="sfnetwork.html">sfnetwork</a></code>.</p></li>
<li><p><code>to_spatial_smooth()</code>: Construct a smoothed version of the network by
iteratively removing pseudo nodes, while preserving the connectivity of the
network. In the case of directed networks, pseudo nodes are those nodes that
have only one incoming and one outgoing edge. In undirected networks, pseudo
nodes are those nodes that have two incident edges. Equality of attribute
values among the two edges can be defined as an additional requirement by
setting the <code>require_equal</code> parameter. Connectivity of the
network is preserved by concatenating the incident edges of each removed
pseudo node. Returns a <code>morphed_sfnetwork</code> containing a single element
of class <code><a href="sfnetwork.html">sfnetwork</a></code>.</p></li>
<li><p><code>to_spatial_subdivision()</code>: Construct a subdivision of the network by
subdividing edges at interior points. Subdividing means that a new node is
added on an edge, and the edge is split in two at that location. Interior
points are those points that shape a linestring geometry feature but are not
endpoints of it. Returns a <code>morphed_sfnetwork</code> containing a single
element of class <code><a href="sfnetwork.html">sfnetwork</a></code>. This morpher requires edges to be
spatially explicit.</p></li>
<li><p><code>to_spatial_subset()</code>: Subset the network by applying a spatial
filter, i.e. a filter on the geometry column based on a spatial predicate.
<code>...</code> is evaluated in the same manner as <code><a href="https://r-spatial.github.io/sf/reference/st_join.html" class="external-link">st_filter</a></code>.
Returns a <code>morphed_sfnetwork</code> containing a single element of class
<code><a href="sfnetwork.html">sfnetwork</a></code>. For filters on an attribute column, use
<code><a href="https://tidygraph.data-imaginist.com/reference/morphers.html" class="external-link">to_subgraph</a></code>.</p></li>
<li><p><code>to_spatial_transformed()</code>: Transform the geospatial coordinates of the
network into a different coordinate reference system. <code>...</code> is
evaluated in the same manner as <code><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></code>.
Returns a <code>morphed_sfnetwork</code> containing a single element of class
<code><a href="sfnetwork.html">sfnetwork</a></code>.</p></li>
<li><p><code>to_spatial_unique()</code>: Merge nodes with equal geometries into a single
node. Returns a <code>morphed_sfnetwork</code> containing a single element of
class <code><a href="sfnetwork.html">sfnetwork</a></code>. By default sfnetworks rounds coordinates to
12 decimal places to determine spatial equality. You can influence this
behavior by explicitly setting the precision of the network using
<code><a href="https://r-spatial.github.io/sf/reference/st_precision.html" class="external-link">st_set_precision</a></code>.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidygraph.data-imaginist.com" class="external-link">tidygraph</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">net</span> <span class="op">=</span> <span class="fu"><a href="as_sfnetwork.html">as_sfnetwork</a></span><span class="op">(</span><span class="va">roxel</span>, directed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="fl">3035</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Temporary changes with morph and unmorph.</span></span></span>
<span class="r-in"><span><span class="va">net</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/activate.html" class="external-link">activate</a></span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/morph.html" class="external-link">morph</a></span><span class="op">(</span><span class="va">to_spatial_shortest_paths</span>, from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>in_paths <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/morph.html" class="external-link">unmorph</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A sfnetwork:</span> <span style="color: #949494;">987</span> <span style="color: #949494;">nodes and</span> <span style="color: #949494;">1215</span> <span style="color: #949494;">edges</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># An undirected multigraph with 9 components and spatially explicit edges</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Dimension: XY</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Bounding box: xmin: 4150707 ymin: 3206375 xmax: 4152366 ymax: 3208564</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Projected CRS: ETRS89-extended / LAEA Europe</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Edge data: 1,215 × 6 (active)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    from    to name                      type                   geometry in_paths</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;LINESTRING [m]&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     1     2 Hagemanns Kämpken         resi… (4151782 3207612, 415176… TRUE    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     3     4 Stiegkamp                 resi… (4151784 3208259, 415172… <span style="color: #BB0000;">NA</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     5     6 Havixbecker Straße        resi… (4151472 3207948, 415147… <span style="color: #BB0000;">NA</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>     7     8 Holzschuhmacherweg        resi… (4150948 3207637, 415099… <span style="color: #BB0000;">NA</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>     9    10 Annette-von-Droste-Hülsh… seco… (4151393 3207929, 415138… <span style="color: #BB0000;">NA</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span>    11    12 <span style="color: #BB0000;">NA</span>                        foot… (4152127 3207036, 415213… <span style="color: #BB0000;">NA</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1,209 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Node data: 987 × 1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            geometry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;POINT [m]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> (4151782 3207612)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> (4151765 3207609)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> (4151784 3208259)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 984 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Lasting changes with convert.</span></span></span>
<span class="r-in"><span><span class="va">net</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/activate.html" class="external-link">activate</a></span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/morph.html" class="external-link">convert</a></span><span class="op">(</span><span class="va">to_spatial_shortest_paths</span>, from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A sfnetwork:</span> <span style="color: #949494;">22</span> <span style="color: #949494;">nodes and</span> <span style="color: #949494;">21</span> <span style="color: #949494;">edges</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># An unrooted tree with spatially explicit edges</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Dimension: XY</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Bounding box: xmin: 4151383 ymin: 3207582 xmax: 4151782 ymax: 3207963</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Projected CRS: ETRS89-extended / LAEA Europe</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Edge data: 21 × 6 (active)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    from    to name         type                   geometry .tidygraph_edge_index</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;LINESTRING [m]&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     1     2 Hagemanns K… resi… (4151782 3207612, 415176…                     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     2     3 Hagemanns K… resi… (4151765 3207609, 415174…                    55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     3     4 Hagemanns K… resi… (4151747 3207604, 415172…                   106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>     4     5 Hagemanns K… resi… (4151710 3207595, 415166…                   112</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>     5     6 Dorffeldstr… resi… (4151661 3207612, 415166…                   780</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span>     6     7 Dorffeldstr… resi… (4151650 3207655, 415165…                   402</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 15 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Node data: 22 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            geometry .tidygraph_node_index</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;POINT [m]&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> (4151782 3207612)                     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> (4151765 3207609)                     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> (4151747 3207604)                   106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 19 more rows</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lucas van der Meer, Lorena Abad, Andrea Gilardi, Robin Lovelace.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

